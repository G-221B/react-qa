(this["webpackJsonpreact-qa"]=this["webpackJsonpreact-qa"]||[]).push([[8],{130:function(n,e,t){"use strict";t.d(e,"m",(function(){return a})),t.d(e,"p",(function(){return c})),t.d(e,"j",(function(){return i})),t.d(e,"q",(function(){return s})),t.d(e,"o",(function(){return u})),t.d(e,"d",(function(){return o})),t.d(e,"c",(function(){return d})),t.d(e,"b",(function(){return l})),t.d(e,"n",(function(){return p})),t.d(e,"h",(function(){return f})),t.d(e,"e",(function(){return b})),t.d(e,"a",(function(){return j})),t.d(e,"f",(function(){return h})),t.d(e,"g",(function(){return x})),t.d(e,"l",(function(){return m})),t.d(e,"k",(function(){return O})),t.d(e,"i",(function(){return g}));var r=t(27);function a(){return r.a.get("/isLogin")}function c(n,e){return r.a.post("/user/login",{account:n,password:e,userType:0})}function i(n){return r.a.post("/user/account",{account:n})}function s(n){var e=n.name,t=n.account,a=n.password,c=n.sex,i=n.email,s=n.detail;return r.a.post("/user/register",{name:e,account:t,password:a,sex:c,email:i,detail:s})}function u(n,e){var t=new FormData;return t.append("file",n),r.a.post("/user/upload",t,{headers:{"content-type":"multipart/form-data"},onUploadProgress:e})}function o(n,e,t){return r.a.post("/question/star",{user_id:n,q_id:e,star:t})}function d(n,e,t){return r.a.post("/question/mark",{user_id:n,q_id:e,mark:t})}function l(n,e,t,a){return console.log(n,e,t,a),r.a.post("/question/answer/star",{user_id:n,a_id:t,q_id:e,star:a})}function p(n,e,t){return console.log(n,e,t),r.a.post("/question/reply",{user_id:n,q_id:e,content:t})}function f(n,e,t,a){return r.a.post("/question/answer/delete",{user_id:n,a_id:t,q_id:e,best_answer:a})}function b(n,e,t){return r.a.post("/question/answer/true",{user_id:n,q_id:e,a_id:t})}function j(n,e,t){return r.a.post("/question/answer/cancel",{user_id:n,q_id:e,a_id:t})}function h(n,e,t,a,c,i){return r.a.post("/user/info",{user_id:n,avatar:e,name:t,sex:a,email:c,detail:i})}function x(n,e,t){return r.a.post("/user/password",{user_id:n,old_password:e,new_password:t})}function m(n,e){return r.a.get("/user/question",{params:{user_id:n,pageNum:e}})}function O(n,e){return r.a.get("/user/mark",{params:{user_id:n,pageNum:e}})}function g(n,e){return r.a.post("/question/delete",{user_id:n,q_id:e})}},138:function(n,e,t){"use strict";t.d(e,"a",(function(){return u})),t.d(e,"b",(function(){return o}));var r=t(31),a=t.n(r),c=t(131),i=t(0),s=t(130);function u(n){Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.m)();case 2:401===e.sent.status&&n.push("/login");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n])}function o(n){Object(i.useEffect)((function(){document.title=n}),[n])}},323:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var r=t(19),a=(t(0),t(128));function c(){var n=Object(a.a)(["\n  width: 100%;\n  height: 40px;\n  color: #fff;\n  text-align: center;\n  background-color: #3579a6;\n  p {\n    line-height:40px;\n  }\n"]);return c=function(){return n},n}var i=t(127).a.div(c());function s(){return Object(r.jsx)(i,{children:Object(r.jsx)("footer",{className:"wrap-v1",children:Object(r.jsx)("p",{children:"\xa92017 - 2021 \u4e2a\u4eba\u6bd5\u4e1a\u8bbe\u8ba1"})})})}},328:function(n,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"b",(function(){return c}));var r=t(48),a=function(n){return{type:r.a,newVal:n}},c=function(n){return{type:r.b,newVal:n}}},430:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var r=t(19),a=(t(0),t(128));function c(){var n=Object(a.a)(["\n   height: 100px;\n    margin-top: 40px;\n    margin-bottom: 20px;\n    text-align:center;\n    .icon {\n      display: inline-block;\n      height: 100px;\n    }\n    span {\n      display: inline-block;\n      font-size: 20px;\n      color: #3579a6;\n    }\n"]);return c=function(){return n},n}var i=t(127).a.div(c()),s=t(43);function u(){return Object(r.jsx)(i,{children:Object(r.jsxs)(s.b,{to:"/home",children:[Object(r.jsxs)("svg",{t:"1611202526363",className:"icon",viewBox:"0 0 1134 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1363",children:[Object(r.jsx)("path",{d:"M220.897507 1024v-145.728532H99.279778A99.279778 99.279778 0 0 1 0 780.055402V415.556787a99.634349 99.634349 0 0 1 99.279778-99.279779H248.199446v70.914128H99.279778a28.365651 28.365651 0 0 0-28.365651 28.365651V780.055402a28.365651 28.365651 0 0 0 28.365651 28.365651h192.531856v87.933518l138.99169-87.933518h179.412742v70.914127h-158.847645z","p-id":"1364",fill:"#3579a6"}),Object(r.jsx)("path",{d:"M931.102493 910.537396L638.227147 726.160665H332.941828A120.554017 120.554017 0 0 1 212.742382 605.606648V120.554017A120.554017 120.554017 0 0 1 332.941828 0h681.484765A120.908587 120.908587 0 0 1 1134.626039 120.554017v485.052631a120.908587 120.908587 0 0 1-120.554017 120.554017h-82.969529zM332.941828 70.914127A49.639889 49.639889 0 0 0 283.65651 120.554017v485.052631a49.639889 49.639889 0 0 0 49.639889 49.639889h326.204986l200.686981 126.581718v-126.581718h154.238227a49.639889 49.639889 0 0 0 49.639889-49.639889V120.554017a49.639889 49.639889 0 0 0-49.639889-49.63989z","p-id":"1365",fill:"#3579a6"}),Object(r.jsx)("path",{d:"M976.842105 497.462604h-70.914127v-15.955679l-54.603878-140.764543-54.958449 140.764543v15.955679h-70.914127v-29.074792l98.925207-254.581718h53.540167l98.925207 254.581718v29.074792zM531.855956 496.398892a141.828255 141.828255 0 1 1 141.828255-141.828255 141.828255 141.828255 0 0 1-141.828255 141.828255z m0-212.742382a70.914127 70.914127 0 1 0 70.914127 70.914127 70.914127 70.914127 0 0 0-70.914127-70.914127z","p-id":"1366",fill:"#3579a6"}),Object(r.jsx)("path",{d:"M581.460388 455.091413l50.100831-50.171745 54.178393 54.142936-50.136288 50.171745z","p-id":"1367",fill:"#3579a6"})]}),Object(r.jsx)("span",{className:"web-title",children:"\u6709\u95ee\u5fc5\u7b54"})]})})}},454:function(n,e,t){"use strict";t.r(e);var r=t(19),a=t(31),c=t.n(a),i=t(131),s=t(59),u=t(0),o=t(43),d=t(61),l=t(450),p=t(10),f=t.n(p),b=t(15),j="CHANGE_CODE",h="CHANGE_USER_CODE",x="CHANGE_ACCOUNT",m="CHANGE_PASSWORD";function O(n,e){switch(e.type){case j:return Object(b.a)(Object(b.a)({},n),{},{code:e.newVal});case h:return Object(b.a)(Object(b.a)({},n),{},{userCode:e.newVal});case x:return Object(b.a)(Object(b.a)({},n),{},{account:e.newVal});case m:return Object(b.a)(Object(b.a)({},n),{},{password:e.newVal});default:return n}}var g=t(323),v=t(128);function w(){var n=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  .login-main {\n    min-height: calc(100vh - 160px - 40px);\n    .login-body {\n      position: relative;\n      width: 400px;\n      height: 430px;\n      margin: 0 auto;\n      padding: 20px;\n      background-color: #fff;\n      border-radius: 5px;\n      box-shadow: 0 0 10px #ccc;\n      .title {\n        margin-bottom: 30px;\n        text-align: center;\n        color: #1890ff;\n      }\n      .input-group {\n        text-align: center;\n      }\n      .error{\n        .ant-input,.ant-input-password {\n        border-color: red;\n        }\n      }\n      .input-item {\n        font-size: 14px;\n        .input-name {\n          display: inline-block;\n          width: 60px;\n          text-align: right;\n          margin-right: 8px;\n        }\n        .ant-input,.ant-input-password {\n          width: 250px;\n          font-size:12px;\n        }\n        .tips {\n          height: 20px;\n          margin-left: 68px;\n          color: red;\n          font-size: 12px;\n          text-align: left;\n        }\n      }\n      #code-item {\n        .ant-input {\n          width: 130px;\n          margin-right: 20px;\n        }\n        .react-captcha {\n          vertical-align: middle;\n        }\n      }\n      .btn {\n        margin-top: 30px;\n        text-align: center;\n      }\n      .register {\n        position: absolute;\n        bottom: 20px;\n        right: 20px;\n        cursor: pointer;\n        color: #1890ff;\n        &:hover {\n          color: red;\n        }\n      }\n    }\n  }\n"]);return w=function(){return n},n}var _=t(127).a.div(w()),C=t(448),N=t(165),k=function(n){return{type:h,newVal:n}},y=t(130),q=t(36),V=t(328),z=t(430),A=t(138);e.default=Object(u.memo)((function(n){var e=Object(u.useState)(""),t=Object(s.a)(e,2),a=t[0],p=t[1],b=Object(u.useState)(""),h=Object(s.a)(b,2),v=h[0],w=h[1],E=Object(u.useState)(""),H=Object(s.a)(E,2),M=H[0],S=H[1],D=Object(d.b)(),G=Object(u.useRef)(),L=Object(u.useReducer)(O,{code:"",userCode:"",account:"",password:""}),P=Object(s.a)(L,2),R=P[0],U=P[1];Object(A.b)("\u767b\u9646\u9875\u9762");var J=Object(u.useCallback)((function(n){U({type:j,newVal:n})}),[]),T=Object(u.useCallback)((function(n){var e=n.target.value;U({type:x,newVal:e}),""!==e.trim()?p(""):p("\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a")}),[]),B=Object(u.useCallback)((function(n){var e,t=n.target.value;U((e=n.target.value,{type:m,newVal:e})),""!==t.trim()?w(""):w("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")}),[]),F=Object(u.useCallback)((function(n){var e=n.target.value;U(k(e)),""!==e.trim()?S(""):S("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")}),[]),W=Object(u.useCallback)(Object(i.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,""===R.account.trim()&&(t=!0,p("\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a")),""===R.password.trim()&&(t=!0,w("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a")),""===R.userCode.trim()&&(t=!0,S("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a")),R.userCode.toLowerCase()!==R.code.toLowerCase()&&(t=!0,S("\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"),G.current.refresh()),!t){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Object(y.p)(R.account,R.password);case 9:0===(r=e.sent).status?(Object(q.i)(r.data.token,"token"),Object(q.i)(R.account,"account"),D(Object(V.a)(R.account)),D(Object(V.b)(r.data.user_id)),n.history.push("/home")):(G.current.refresh(),U(k("")));case 11:case"end":return e.stop()}}),e)}))),[R,n.history,D]);return Object(r.jsxs)(_,{children:[Object(r.jsx)(z.a,{}),Object(r.jsx)("div",{className:"login-main",children:Object(r.jsxs)("div",{className:"login-body",children:[Object(r.jsx)("h2",{className:"title",children:"\u767b\u9646\u754c\u9762"}),Object(r.jsxs)("div",{className:f()({error:""!==a},"input-item"),children:[Object(r.jsx)("span",{className:"input-name",children:"\u8d26\u53f7:"}),Object(r.jsx)(C.a,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7",value:R.account,onChange:T}),Object(r.jsx)("p",{className:f()({error:""===R.account.trim()?"error":""},"tips"),children:a})]}),Object(r.jsxs)("div",{className:f()({error:""!==v},"input-item"),children:[Object(r.jsx)("span",{className:"input-name",children:"\u5bc6\u7801:"}),Object(r.jsx)(C.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:R.password,onChange:B}),Object(r.jsx)("p",{className:"tips",children:v})]}),Object(r.jsxs)("div",{className:f()({error:""!==M},"input-item"),id:"code-item",children:[Object(r.jsx)("span",{className:"input-name",children:"\u9a8c\u8bc1\u7801:"}),Object(r.jsx)(C.a,{placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",value:R.userCode,onChange:F,onPressEnter:W}),Object(r.jsx)(l.a,{ref:G,charNum:4,onChange:J,height:"30"}),Object(r.jsx)("p",{className:"tips",children:M})]}),Object(r.jsx)("div",{className:"btn",children:Object(r.jsx)(N.a,{type:"primary",onClick:W,children:"\u767b\u9646"})}),Object(r.jsx)(o.b,{to:"/register",className:"register",children:"\u8fd8\u6ca1\u6709\u8d26\u53f7\uff1f\u7acb\u5373\u6ce8\u518c\u2192"})]})}),Object(r.jsx)(g.a,{})]})}))}}]);